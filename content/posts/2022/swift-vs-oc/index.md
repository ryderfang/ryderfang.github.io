---
title: "Swift ä¸ OC æœ‰å“ªäº›ä¸åŒ"
date: 2022-04-10T15:15:57+08:00
categories: [ObjC, Swift]
tags: [swift]
---

{{< alert info >}}
å‚è€ƒï¼š<a href='https://swift.bootcss.com/' target='_blank'>swift.bootcss.com</a>
{{< /alert >}}

## åŸºæœ¬è¯­æ³•

### åˆ†å·

* åˆ†å·åœ¨ Swift ä¸­ä¸æ˜¯å¿…é¡»çš„ï¼Œå½“ç„¶åœ¨ä¸€è¡Œä¸­å¤šä¸ªè¯­å¥é—´è¿˜æ˜¯éœ€è¦çš„ã€‚

> è¶Šçœ‹è¶Šè§‰å¾—åƒ Python :)

### ç©ºæ ¼

* Swift å¯¹äºç©ºæ ¼æœ‰ç€ä¸€å®šçš„çº¦æŸï¼Œç›¸å¯¹ OC æ¥è¯´æ›´ä¸¥æ ¼ï¼Œä½†åˆæ²¡æœ‰ Python é‚£ä¹ˆç²¾ç¡® ï¼ˆä¸éœ€è¦æ¸¸æ ‡å¡å°º ğŸ¤¡ï¼‰

```swift
// '=' must have consistent whitespace on both sides
var a= 1 + 2
// '+' is not a postfix unary operator
var a = 1+ 2
// Consecutive statements on a line must be separated by ';'
var a = 1 +2
// ok
var a = 1 + 2
// ok, not recommand
var a = 1+2
```

### switch

* Swift ä¸­çš„ switch æ”¯æŒä»»æ„ç±»å‹ï¼Œè€Œ OC åªæ”¯æŒæ•´å‹åŠèƒ½è½¬æ¢æˆæ•´å‹çš„ç±»å‹ã€‚

* åœ¨ Swift ä¸­ break å¹¶ä¸æ˜¯å¿…é¡»çš„ã€‚æŸä¸ª case åŒ¹é…æˆåŠŸåï¼Œä¼šåœ¨æ‰§è¡Œå®Œä»£ç åè‡ªåŠ¨è·³å‡ºï¼›è€Œ OC ä»¥åŠ C/C++ ä¼šç»§ç»­åŒ¹é…ï¼Œ
â€”â€” è¿™ç§æ–¹å¼å«åš **è´¯ç©¿**ã€‚åœ¨ Swift ä¸­å¯ä»¥ä½¿ç”¨ `fallthrough` å…³é”®è¯ä»¥æ”¯æŒè¿™ç§ç‰¹æ€§ã€‚

* Swift ä¸­çš„ switch æ”¯æŒ where è¯­å¥ä»¥æ·»åŠ é¢å¤–çš„æ¡ä»¶ã€‚

### å‡½æ•°åµŒå¥—

* Swift æ”¯æŒåœ¨å‡½æ•°å†…éƒ¨å®šä¹‰å‡½æ•°ã€‚

```swift
func testVariable () {
    var a : String? = "1"
    func _inerfunc() {
        print("hello", a ?? "2")
    }
    _inerfunc()
}
```

### ç»§æ‰¿

* Swift ç»§æ‰¿è‡ªçˆ¶ç±»çš„æ–¹æ³•ï¼Œé‡å†™æ—¶ï¼Œéœ€è¦åŠ  `override` å…³é”®å­—ã€‚OC ä¸éœ€è¦ã€‚

### åŒºé—´è¿ç®—ç¬¦

* åœ¨ Swift ä¸­ [a, b] çš„åŒºé—´å¯ä»¥ç”¨ `a...b`

* [a, b) å¯ä»¥è¡¨ç¤ºæˆ `a..<b`

* è¿˜æœ‰ `[a...]` å’Œ `[..<b]` ç­‰

## ç±»å‹

> Swift æ˜¯ä¸€ä¸ªç±»å‹å®‰å…¨ (type safe) çš„è¯­è¨€ã€‚

### typealias ç±»å‹åˆ«å

* è¿™ä¸ªåœ¨ OC ä¸­å¯ä»¥ä½¿ç”¨ `typedef` å®ç°ã€‚

### éšå¼è½¬æ¢

* Swift æœ‰ä¸¥æ ¼ç±»å‹å®šä¹‰ï¼Œä¸èƒ½éšå¼è½¬æ¢ã€‚

æ¯”å¦‚ if è¯­å¥ä¸­çš„æ¡ä»¶ï¼Œåœ¨ OC ä¸­å¯ä»¥ä½¿ç”¨æ•´æ•°ï¼Œä½†åœ¨ Swift ä¸­åªèƒ½æ˜¯ Bool å‹ã€‚

```swift
let a = 1
// Type 'Int' cannot be used as a boolean; test for '!= 0' instead
if (a) {

}
```

### Optional å¯é€‰å€¼

* è¿™æ˜¯ OC æ²¡æœ‰çš„ç‰¹æ€§ï¼Œé¿å…äº†å¾ˆå¤šåˆ¤ç©ºçš„é€»è¾‘ä»£ç ã€‚åœ¨é“¾å¼è°ƒç”¨æ—¶ï¼Œä¹Ÿæ›´æ–¹ä¾¿ã€‚


### é—­åŒ…ä¸ block

* Swift ä¸­çš„é—­åŒ…ä¸ OC ä¸­çš„ block ç±»ä¼¼ï¼Œéƒ½æ˜¯å°†ä¸€æ®µä»£ç å°è£…èµ·æ¥ï¼Œç”¨äºå‚æ•°ã€è¿”å›å€¼ç­‰ï¼Œä¹Ÿéƒ½å¯ä»¥æ•è·å¤–éƒ¨å˜é‡ã€‚

* ä½†ä¹Ÿæœ‰ä¸åŒä¹‹å¤„ï¼š

  - æœ¬è´¨ä¸åŒï¼Œé—­åŒ…æœ¬è´¨æ˜¯ä¸ªå‡½æ•°ï¼Œä½† block æ˜¯ä¸€ä¸ªç»“æ„ä½“ã€‚

  - é—­åŒ…å†™èµ·æ¥æ›´ç®€æ´ã€æ›´çµæ´»ã€‚æœ‰å¤šç§ç±»å‹ï¼šè‡ªåŠ¨é—­åŒ…ã€å°¾éšé—­åŒ…ã€é€ƒé€¸é—­åŒ… & éé€ƒé€¸é—­åŒ…ç­‰ã€‚

### enum æšä¸¾

* Swift ä¸­çš„ `enum` å¯ä»¥åŒ…å«æ–¹æ³•ï¼Œè€Œ OC ä¸è¡Œ

### Tuple å…ƒç»„

* è¿™æ˜¯ OC æ²¡æœ‰çš„ç±»å‹ï¼Œç”¨äºè¿”å›ä¸€ç»„æ•°æ®ï¼Œå¦‚ (404, "Not Found")

### nil

* Swift ä¸­çš„ nil è¡¨ç¤ºå¯é€‰å€¼ç±»å‹çš„å€¼ä¸ºç©ºï¼Œä¸èƒ½ç”¨äºç¡®å®šçš„ç±»å‹ã€‚è€Œ OC ä¸­ï¼Œå®ƒæ˜¯ä¸€ä¸ªç©ºæŒ‡é’ˆçš„æ¦‚å¿µï¼Œåªèƒ½å¯¹äºå¯¹è±¡ã€‚

* å¯é€‰å€¼å¯ä»¥æ˜¯æ•´å‹ï¼Œå¦‚ `var a : Int? = nil`

### ?? ç©ºåˆ

* æ˜¯å¯¹ä¸€ä¸ªå¯é€‰ç±»å‹è§£æï¼Œç±»å‹äº OC ä¸­çš„ `a ?: b`

```swift
// if a == nil, return b
a ?? b
// is equal to 
a == nil ? a! : b
```

## é«˜çº§ç‰¹æ€§

### å‡½æ•°

* Swift ä¸­çš„å‡½æ•°ï¼Œå¯ä»¥ä¸æŒ‡æ˜è¿”å›å€¼ï¼Œé»˜è®¤è¿”å›çš„æ˜¯ `()` â€”â€” ç©ºå…ƒç»„ã€‚è€Œä¸æ˜¯ `Void`

* Swift å¯ä»¥ç»™å‡½æ•°å‚æ•°è®¾ç½®æ ‡ç­¾ï¼ˆåˆ«åï¼‰ï¼Œ`_` è¡¨ç¤ºä¸éœ€è¦æ ‡ç­¾ã€‚

* å•è¡Œè¡¨è¾¾å¼çš„å‡½æ•°ï¼Œå¯ä»¥ç›´æ¥çœç•¥ `return`ï¼›å¸¸ç”¨äº `get` æ–¹æ³•ã€‚

* é»˜è®¤å‡½æ•°å‚æ•°æ˜¯ä¸èƒ½ä¿®æ”¹çš„ï¼Œéœ€è¦ä½¿ç”¨ `inout` æ ‡æ˜éœ€è¦ä¿®æ”¹çš„å‚æ•°ã€‚
### ç»“æ„ä½“ä¸ç±»

* struct åœ¨ OC ä¸­å¹¶ä¸æ˜¯ä¸€ç­‰å…¬æ°‘ï¼Œä½†åœ¨ Swift ä¸­ï¼Œæ˜¯ä¸ class åŒç­‰åœ°ä½çš„å¯¹è±¡å°è£…ã€‚

ref: [Choosing Between Structures and Classes](https://developer.apple.com/documentation/swift/choosing_between_structures_and_classes)

### å€¼ç±»å‹ä¸å¼•ç”¨ç±»å‹

`å€¼ç±»å‹` è¢«èµ‹å€¼ç»™å¦ä¸€ä¸ªå˜é‡æ—¶ï¼Œä¼šè¿›è¡Œ copy æ“ä½œï¼Œä»¥ç¡®ä¿æ–°å˜é‡çš„ä¿®æ”¹ä¸ä¼šå½±å“åŸæ¥çš„å˜é‡å€¼ã€‚
è€Œ `å¼•ç”¨ç±»å‹` çš„èµ‹å€¼æ˜¯ä¸€æ¬¡æŒ‡é’ˆèµ‹å€¼ï¼Œæ–°æ—§å˜é‡æŒ‡å‘åŒä¸€å—å†…å­˜ã€‚

* Swift ä¸­ String, enum, struct æ˜¯å€¼ç±»å‹ï¼Œclass æ˜¯å¼•ç”¨ç±»å‹ã€‚

* OC ä¸­ä»…æœ‰åŸºæœ¬æ•°æ®ç±»å‹ã€åŸºç¡€ struct æ˜¯å€¼ç±»å‹ã€‚

### å±æ€§åŒ…è£…å™¨

* Swift ä¸­çš„æ–°ç‰¹æ€§ï¼Œå…³é”®è¯ `@propertyWrapper`

ç”¨äºå°†æŸä¸ªå±æ€§çš„å®é™…å€¼éšè—èµ·æ¥ï¼Œå¯¹å¤–æš´éœ²å°è£…è¿‡çš„å€¼ã€‚


### ç±»æ–¹æ³•

* `static` å’Œ `class` åœ¨ `func` å‰éƒ½è¡¨ç¤ºç±»å‹æ–¹æ³•ï¼Œåè€…è¡¨ç¤ºå¯è¢«å­ç±»ç»§æ‰¿

* Swift ä¸­å¯ä»¥ä¸ºç±»ã€ç»“æ„ä½“å’Œæšä¸¾å®šä¹‰ç±»å‹æ–¹æ³•


### extension æ‰©å±•

* Swift ä¸­çš„æ‰©å±•ä¸ OC ä¸­çš„ category ç±»ä¼¼ï¼Œä¹Ÿæœ‰ä¸€äº›ä¸åŒ

  - æ‰©å±•æ˜¯æ²¡æœ‰åå­—çš„
  - æ‰©å±•å¯ä»¥æ·»åŠ å±æ€§
  - æ‰©å±•ä¸èƒ½é‡å†™å·²æœ‰æ–¹æ³•ï¼Œä½†åˆ†ç±»å¯ä»¥ï¼ˆè¦†ç›–ï¼‰
  - æ‰©å±•ä¸­çš„åŠŸèƒ½ï¼Œå¯è¢«æ‰©å±•å®šä¹‰ä¹‹å‰çš„å®ä¾‹ä½¿ç”¨ï¼›ä½†åˆ†ç±»æ–¹æ³•å¿…é¡»è¢« import åæ‰å¯è§

### protocol åè®® 

* Swift ä¸­çš„åè®®æ”¯æŒæŒ‡å®šå±æ€§
* Swift ä¸­çš„åè®®å¯ä»¥æŒ‡å®šåˆå§‹åŒ–æ–¹æ³•ï¼Œå®ç°æ—¶éœ€è¦ä½¿ç”¨ `required` å…³é”®å­—
* Swift ä¸­çš„åè®®å¯ä»¥ç»„åˆï¼Œä½¿ç”¨ `ProtocolA & ProtocolB` å˜æˆä¸€ä¸ªæ–°çš„åè®®ç±»å‹
* Swift ä¸­çš„åè®®ï¼Œå¯ä»¥æä¾›é»˜è®¤å®ç°

### æ³›å‹

* ç±»ä¼¼ C++ ä¸­çš„æ¨¡æ¿è¯­æ³•ç‰¹æ€§ï¼ŒOC ä¸­æ²¡æœ‰ã€‚

### actor ç±»å‹

* Swift ä¸­æ–°å¢çš„ç±»å‹

> To be continued...